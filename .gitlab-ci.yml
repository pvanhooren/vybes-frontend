image: node:latest

stages:          # List of stages for jobs, and their order of execution
  - e2e-test
  - deploy

e2e-test-job:   # This job runs in the test stage.
  image: cypress/browsers:node12.14.1-chrome85-ff81
  stage: e2e-test
  script:
    # install dependencies
    - npm ci
    # start the server in the background
    - npm start &
    # run Cypress tests
    - npx cypress run --headless --browser chrome
  allow_failure: true

